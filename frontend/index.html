<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alzheimer's Support - Scan Report</title>
    <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <!-- Instant redirect â€” runs on load AND bfcache restore -->
    <script>
        function checkAuthScan() {
            if (!localStorage.getItem('token')) {
                window.location.replace('signup.html');
            }
        }
        checkAuthScan();
        window.addEventListener('pageshow', function(e) {
            if (e.persisted) checkAuthScan();
        });
    </script>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="scan.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ§ </text></svg>">
</head>
<body>
    <header class="header">
        <div class="logo">
            <div class="logo-icon">ğŸ§ </div>
            <div class="logo-text">Alzheimer's Support</div>
        </div>
        <nav class="nav-links" id="scanNav"></nav>
    </header>

    <main class="scan-main">
        <!-- Hero â€” compact -->
        <section class="scan-hero">
            <div class="hero-content">
                <div class="hero-text">
                    <div class="hero-badge">ğŸ”¬ AI-Powered Medical Analysis</div>
                    <h1>Alzheimer's Detection<br><span class="highlight">Made Simple</span></h1>
                    <p>Upload your medical test report (PDF) and our advanced AI model will assess Alzheimer's risk indicators â€” privately, securely, and instantly.</p>
                    <div class="hero-features">
                        <div class="hero-feat"><span class="feat-icon">ğŸ”’</span><span class="feat-text">Private &amp; Secure</span></div>
                        <div class="hero-feat"><span class="feat-icon">âš¡</span><span class="feat-text">Instant Results</span></div>
                        <div class="hero-feat"><span class="feat-icon">ğŸ¤–</span><span class="feat-text">AI-Powered</span></div>
                        <div class="hero-feat"><span class="feat-icon">ğŸ“‹</span><span class="feat-text">PDF Reports</span></div>
                    </div>
                </div>
                <div class="hero-visual">
                    <div class="brain-animation">
                        <div class="brain-ring ring-1"></div>
                        <div class="brain-ring ring-2"></div>
                        <div class="brain-ring ring-3"></div>
                        <div class="brain-icon">ğŸ§ </div>
                        <div class="pulse-dot dot-1"></div>
                        <div class="pulse-dot dot-2"></div>
                        <div class="pulse-dot dot-3"></div>
                    </div>
                </div>
            </div>
        </section>

        <section class="upload-section">
            <div class="upload-container">

                <!-- Upload Card -->
                <div class="upload-card" id="uploadCard">
                    <h2>ğŸ“„ Upload Medical Report</h2>
                    <p class="upload-subtitle">Upload a PDF of your brain scan, MRI report, or cognitive assessment</p>

                    <!-- File input OUTSIDE upload-area so it doesn't block clicks -->
                    <input type="file" id="pdfInput" accept=".pdf" style="display:none;">

                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon-large">ğŸ“</div>
                        <p class="upload-main-text">Drag &amp; Drop your PDF here</p>
                        <p class="upload-or">â€” or â€”</p>
                        <button type="button" class="upload-btn" id="uploadBtn">Browse Files</button>
                        <p class="upload-hint">PDF files only &bull; Max 10MB</p>
                    </div>

                    <div class="file-selected" id="fileSelected" style="display:none;">
                        <div class="file-info">
                            <span class="file-icon">ğŸ“„</span>
                            <div class="file-details">
                                <span class="file-name" id="fileName">document.pdf</span>
                                <span class="file-size" id="fileSize">2.4 MB</span>
                            </div>
                            <button type="button" class="remove-file" id="removeFile" title="Remove">âœ•</button>
                        </div>
                        <button type="button" class="analyze-btn" id="analyzeBtn">ğŸ” Analyze Report</button>
                    </div>
                </div>

                <!-- Analysis Progress -->
                <div class="analysis-card" id="analysisCard" style="display:none;">
                    <div class="analysis-header">
                        <div class="analysis-anim">ğŸ§ </div>
                        <h2>Analyzing Your Report...</h2>
                        <p>Our AI model is processing your medical data</p>
                    </div>
                    <div class="progress-steps">
                        <div class="step" id="step1"><div class="step-icon">ğŸ“¤</div><div class="step-info"><span class="step-name">Uploading PDF</span><div class="step-bar"><div class="step-fill" id="fill1"></div></div></div><span class="step-status" id="status1">â³</span></div>
                        <div class="step" id="step2"><div class="step-icon">ğŸ“</div><div class="step-info"><span class="step-name">Extracting Medical Data</span><div class="step-bar"><div class="step-fill" id="fill2"></div></div></div><span class="step-status" id="status2">â³</span></div>
                        <div class="step" id="step3"><div class="step-icon">ğŸ¤–</div><div class="step-info"><span class="step-name">Running AI Analysis</span><div class="step-bar"><div class="step-fill" id="fill3"></div></div></div><span class="step-status" id="status3">â³</span></div>
                        <div class="step" id="step4"><div class="step-icon">ğŸ“Š</div><div class="step-info"><span class="step-name">Generating Report</span><div class="step-bar"><div class="step-fill" id="fill4"></div></div></div><span class="step-status" id="status4">â³</span></div>
                    </div>
                </div>

                <!-- Result: Positive -->
                <div class="result-card positive-result" id="positiveResult" style="display:none;">
                    <div class="result-header"><div class="result-icon">âš ï¸</div><h2>Analysis Complete</h2></div>
                    <div class="result-badge positive-badge">Alzheimer's Indicators Detected</div>
                    <div class="risk-meter">
                        <div class="risk-label">Risk Assessment Score</div>
                        <div class="risk-bar-container"><div class="risk-bar-fill" id="riskBarFill"></div></div>
                        <div class="risk-percent" id="riskPercent">72%</div>
                    </div>
                    <div class="result-findings" id="resultFindings"></div>
                    <div class="result-message positive-msg"><p>ğŸ¥ Based on your report, we recommend consultation with a neurologist. Our platform provides tools to help you and your caregivers manage and track your condition.</p></div>
                    <div class="result-actions">
                        <button type="button" class="action-primary" id="goToDashboard">Access Your Dashboard â†’</button>
                        <button type="button" class="action-secondary" id="scanAgain">Upload Different Report</button>
                    </div>
                </div>

                <!-- Result: Negative -->
                <div class="result-card negative-result" id="negativeResult" style="display:none;">
                    <div class="result-header"><div class="result-icon">âœ…</div><h2>Analysis Complete</h2></div>
                    <div class="result-badge negative-badge">No Significant Indicators Found</div>
                    <div class="result-message negative-msg"><p>ğŸ‰ Great news! Your report does not show significant Alzheimer's risk indicators at this time. Continue to maintain a healthy lifestyle and consult your doctor regularly.</p></div>
                    <div class="healthy-tips">
                        <h4>ğŸ’¡ Maintaining Brain Health</h4>
                        <div class="tips-grid">
                            <div class="tip-item">ğŸƒ Regular exercise</div>
                            <div class="tip-item">ğŸ¥¦ Healthy diet</div>
                            <div class="tip-item">ğŸ˜´ Quality sleep</div>
                            <div class="tip-item">ğŸ§© Mental stimulation</div>
                        </div>
                    </div>
                    <div class="result-actions">
                        <button type="button" class="action-primary" id="goToDashboardNeg">Access Your Dashboard â†’</button>
                        <button type="button" class="action-secondary" id="scanAgainNeg">Upload Different Report</button>
                    </div>
                </div>

            </div>

            <!-- Info Sidebar -->
            <div class="info-sidebar">
                <div class="info-card">
                    <h3>ğŸ“‹ What We Analyze</h3>
                    <ul class="info-list">
                        <li>ğŸ§¬ Biomarker levels (Amyloid, Tau)</li>
                        <li>ğŸ”¬ Cognitive assessment scores</li>
                        <li>ğŸ“Š MRI / CT scan findings</li>
                        <li>ğŸ©º Neurological test results</li>
                        <li>ğŸ’Š Medication history markers</li>
                        <li>ğŸ“… Symptom progression data</li>
                    </ul>
                </div>
                <div class="info-card disclaimer-card">
                    <h3>âš ï¸ Medical Disclaimer</h3>
                    <p>This AI analysis is for informational purposes only and should not replace professional medical advice. Always consult a qualified neurologist for a formal diagnosis.</p>
                </div>
                <div class="info-card privacy-card">
                    <h3>ğŸ”’ Your Privacy</h3>
                    <p>Your uploaded documents are processed securely and never stored permanently. All analysis happens in real-time and is deleted after processing.</p>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <p>&copy; 2025 Alzheimer's Support Platform. All rights reserved.</p>
    </footer>
    <script src="api.js"></script>
    <script src="user-store.js"></script>
    <script src="scan.js"></script>
</body>
</html>
